"use strict";(self.webpackChunktoolbox=self.webpackChunktoolbox||[]).push([[291],{91675:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(29439),s=t(35759),o=t(38254),i=t(13811),c=t(11647),l=t(50033),u=t.n(l),a=t(72791),d=t(80184);function x(e){var n=e.content,t=(e.onSuccess,(0,a.useRef)(null)),l=(0,a.useState)(!1),x=(0,r.Z)(l,2),f=x[0],Z=x[1];return(0,a.useEffect)((function(){if(t.current){var e=new(u())(t.current);e.on("success",(function(e){Z(!0)})),e.on("error",(function(e){console.error(e)}))}}),[]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.Z,{position:"end",children:(0,d.jsx)(i.Z,{ref:t,"data-clipboard-text":n,"aria-label":"Copy content",children:(0,d.jsx)(s.Z,{})})}),(0,d.jsx)(c.Z,{open:f,onClose:function(){return Z(!1)},autoHideDuration:3e3,message:"\u590d\u5236\u6210\u529f"})]})}},71291:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var r=t(29439),s=t(476),o=t(67952),i=t(99756),c=t(31401),l=t(96015),u=t(45629),a=t(76132),d=t(4346),x=t(80184),f=function(e){var n=e.totps;return(0,x.jsx)(l.Z,{children:(0,x.jsx)(u.Z,{children:null===n||void 0===n?void 0:n.map((function(e){return(0,x.jsx)(a.ZP,{children:(0,x.jsx)(d.Z,{children:"ha"})},e.secretKey)}))})})},Z=t(1413),h=t(33439),j=t(75017),p=t(38254),v=t(13811),m=t(61091),b=t(61134),g=t(72791),y=t(20741),S=t(91675),C=t(96580),I=t(4565),k=t(72986),w=t(97892),K=t.n(w),P=function(e){var n=e.totp,t=(0,g.useState)(0),s=(0,r.Z)(t,2),o=s[0],i=s[1],c=(0,g.useState)(""),u=(0,r.Z)(c,2),a=u[0],d=u[1];(0,g.useEffect)((function(){if(i(0),n){var e=K()().second(),t=K()().valueOf();i(t+1e3*(e>=30?60-e:30-e)),d(n.generate())}}),[n]);var f=(0,k.Z)({targetDate:o,onEnd:function(){if(i(0),n){var e=K()().second(),t=K()().valueOf();i(t+1e3*(e>=30?60-e:30-e)),d(n.generate())}}}),Z=(0,r.Z)(f,1)[0];return(0,x.jsx)(j.Z,{label:"Token",value:a,InputProps:{endAdornment:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(l.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,x.jsx)(C.Z,{variant:"determinate",value:(30-Math.round(Z/1e3))/30*100}),(0,x.jsx)(l.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.jsx)(I.Z,{variant:"caption",component:"div",color:"text.secondary",children:Math.round(Z/1e3)})})]}),(0,x.jsx)(S.Z,{content:a})]})}})},T=function(e){var n=e.totp,t=(0,g.useRef)(null),r=(0,g.useMemo)((function(){return{width:128,height:128}}),[]);return(0,g.useEffect)((function(){n&&y.toCanvas(t.current,n.toString(),r)}),[r,n]),(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(l.Z,{sx:r,children:(0,x.jsx)("canvas",{ref:t})}),(0,x.jsx)(l.Z,{sx:{mt:2},children:(0,x.jsx)(P,{totp:n})}),(0,x.jsx)(l.Z,{sx:{mt:2},children:(0,x.jsx)(j.Z,{label:"URI",value:(null===n||void 0===n?void 0:n.toString())||"",InputProps:{endAdornment:(0,x.jsx)(S.Z,{content:null===n||void 0===n?void 0:n.toString()})},fullWidth:!0})})]})},A=function(){var e=(0,g.useState)(),n=(0,r.Z)(e,2),t=n[0],s=n[1],o=(0,b.cI)({defaultValues:{secretKey:""}}),i=o.register,u=o.handleSubmit,a=o.setValue,d=o.control,f=function(){var e=new c.Secret;a("secretKey",e.base32,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("form",{onSubmit:u((function(e){var n=new c.TOTP({issuer:e.issuer,label:e.account,secret:e.secretKey});s(n)})),children:[(0,x.jsx)(j.Z,(0,Z.Z)((0,Z.Z)({label:"Issuer"},i("issuer")),{},{fullWidth:!0,required:!0})),(0,x.jsx)(l.Z,{sx:{pt:2},children:(0,x.jsx)(j.Z,(0,Z.Z)((0,Z.Z)({label:"Account"},i("account")),{},{fullWidth:!0}))}),(0,x.jsx)(l.Z,{sx:{pt:2},children:(0,x.jsx)(b.Qr,{control:d,name:"secretKey",render:function(e){var n=e.field;return(0,x.jsx)(j.Z,(0,Z.Z)((0,Z.Z)({label:"Secret Key"},n),{},{InputProps:{endAdornment:(0,x.jsx)(p.Z,{position:"end",children:(0,x.jsx)(v.Z,{onClick:f,children:(0,x.jsx)(h.Z,{})})})},fullWidth:!0,required:!0}))}})}),(0,x.jsxs)(l.Z,{sx:{pt:2,float:"right"},children:[(0,x.jsx)(m.Z,{children:"\u53d6\u6d88"}),(0,x.jsx)(m.Z,{type:"submit",children:"\u4fdd\u5b58"})]})]}),(0,x.jsx)(T,{totp:t})]})},E=function(){var e=(0,i.Z)("totps",{defaultValue:[]}),n=(0,r.Z)(e,2),t=n[0];n[1];return console.log(c.Secret.fromUTF8("ha")),(0,x.jsx)(s.Z,{children:(0,x.jsxs)(o.Z,{container:!0,spacing:2,sx:{mt:2},children:[(0,x.jsx)(o.Z,{xs:4,children:(0,x.jsx)(f,{totps:t})}),(0,x.jsx)(o.Z,{xs:8,children:(0,x.jsx)(A,{})})]})})}}}]);
//# sourceMappingURL=291.c10f7392.chunk.js.map