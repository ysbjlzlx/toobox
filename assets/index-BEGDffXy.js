import{r as R}from"./pro-components-D4VvMrwW.js";import{P as vt}from"./index-CnZGZKCS.js";import{E as S,H as qe,s as be,t as c,c as bt,d as Ct,a as xt,h as kt,f as wt,b as yt,l as St,e as Mt,g as At,i as Bt,j as Lt,k as Dt,m as Et,n as Ot,o as I,p as Nt,q as Tt,r as Rt,u as Ft,v as Gt,w as Wt,x as It,y as Ht,z as jt,A as Kt,B as $e,C as Ut,D as Vt,S as q,F as Pt,P as Je,G as zt,I as qt,J as Ce,V as $t,K as Jt,R as X,L as N,M as ue,N as Qt,O as Qe,W as Ye,Q as Yt}from"./jsoneditor-B3PGnrMj.js";import{aJ as x,r as k,aK as $,R as Ze,aI as Zt}from"./antd-DeG7bo76.js";var _e=r=>{var{theme:e,settings:t={},styles:a=[]}=r,i={".cm-gutters":{}},n={};t.background&&(n.backgroundColor=t.background),t.backgroundImage&&(n.backgroundImage=t.backgroundImage),t.foreground&&(n.color=t.foreground),t.fontSize&&(n.fontSize=t.fontSize),(t.background||t.foreground)&&(i["&"]=n),t.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(i[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(i[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(i[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(i[".cm-content"]={caretColor:t.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var o={};t.gutterActiveForeground&&(o.color=t.gutterActiveForeground),t.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:t.lineHighlight},o.backgroundColor=t.lineHighlight),i[".cm-activeLineGutter"]=o,t.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=S.theme(i,{dark:e==="dark"}),s=qe.define(a),f=[l,be(s)];return f},_t={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},Xt=[{tag:[c.standard(c.tagName),c.tagName],color:"#116329"},{tag:[c.comment,c.bracket],color:"#6a737d"},{tag:[c.className,c.propertyName],color:"#6f42c1"},{tag:[c.variableName,c.attributeName,c.number,c.operator],color:"#005cc5"},{tag:[c.keyword,c.typeName,c.typeOperator,c.typeName],color:"#d73a49"},{tag:[c.string,c.meta,c.regexp],color:"#032f62"},{tag:[c.name,c.quote],color:"#22863a"},{tag:[c.heading,c.strong],color:"#24292e",fontWeight:"bold"},{tag:[c.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[c.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[c.atom,c.bool,c.special(c.variableName)],color:"#e36209"},{tag:[c.url,c.escape,c.regexp,c.link],color:"#032f62"},{tag:c.link,textDecoration:"underline"},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.invalid,color:"#cb2431"}],er=r=>{var{theme:e="light",settings:t={},styles:a=[]}={};return _e({theme:e,settings:x({},_t,t),styles:[...Xt,...a]})},tr=er(),rr={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},nr=[{tag:[c.standard(c.tagName),c.tagName],color:"#7ee787"},{tag:[c.comment,c.bracket],color:"#8b949e"},{tag:[c.className,c.propertyName],color:"#d2a8ff"},{tag:[c.variableName,c.attributeName,c.number,c.operator],color:"#79c0ff"},{tag:[c.keyword,c.typeName,c.typeOperator,c.typeName],color:"#ff7b72"},{tag:[c.string,c.meta,c.regexp],color:"#a5d6ff"},{tag:[c.name,c.quote],color:"#7ee787"},{tag:[c.heading,c.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[c.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[c.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[c.atom,c.bool,c.special(c.variableName)],color:"#ffab70"},{tag:c.link,textDecoration:"underline"},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.invalid,color:"#f97583"}],ir=r=>{var{theme:e="dark",settings:t={},styles:a=[]}={};return _e({theme:e,settings:x({},rr,t),styles:[...nr,...a]})};ir();var ye=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,a=[];e.closeBracketsKeymap!==!1&&(a=a.concat(bt)),e.defaultKeymap!==!1&&(a=a.concat(Ct)),e.searchKeymap!==!1&&(a=a.concat(xt)),e.historyKeymap!==!1&&(a=a.concat(kt)),e.foldKeymap!==!1&&(a=a.concat(wt)),e.completionKeymap!==!1&&(a=a.concat(yt)),e.lintKeymap!==!1&&(a=a.concat(St));var i=[];return e.lineNumbers!==!1&&i.push(Mt()),e.highlightActiveLineGutter!==!1&&i.push(At()),e.highlightSpecialChars!==!1&&i.push(Bt()),e.history!==!1&&i.push(Lt()),e.foldGutter!==!1&&i.push(Dt()),e.drawSelection!==!1&&i.push(Et()),e.dropCursor!==!1&&i.push(Ot()),e.allowMultipleSelections!==!1&&i.push(I.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(Nt()),e.syntaxHighlighting!==!1&&i.push(be(Tt,{fallback:!0})),e.bracketMatching!==!1&&i.push(Rt()),e.closeBrackets!==!1&&i.push(Ft()),e.autocompletion!==!1&&i.push(Gt()),e.rectangularSelection!==!1&&i.push(Wt()),t!==!1&&i.push(It()),e.highlightActiveLine!==!1&&i.push(Ht()),e.highlightSelectionMatches!==!1&&i.push(jt()),e.tabSize&&typeof e.tabSize=="number"&&i.push(Kt.of(" ".repeat(e.tabSize))),i.concat([$e.of(a.flat())]).filter(Boolean)};const ar="#e5c07b",Se="#e06c75",or="#56b6c2",lr="#ffffff",se="#abb2bf",ge="#7d8799",sr="#61afef",cr="#98c379",Me="#d19a66",dr="#c678dd",fr="#21252b",Ae="#2c313a",Be="#282c34",de="#353a42",hr="#3E4451",Le="#528bff",ur=S.theme({"&":{color:se,backgroundColor:Be},".cm-content":{caretColor:Le},".cm-cursor, .cm-dropCursor":{borderLeftColor:Le},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:hr},".cm-panels":{backgroundColor:fr,color:se},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Be,color:ge,border:"none"},".cm-activeLineGutter":{backgroundColor:Ae},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:de},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:de,borderBottomColor:de},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ae,color:se}}},{dark:!0}),gr=qe.define([{tag:c.keyword,color:dr},{tag:[c.name,c.deleted,c.character,c.propertyName,c.macroName],color:Se},{tag:[c.function(c.variableName),c.labelName],color:sr},{tag:[c.color,c.constant(c.name),c.standard(c.name)],color:Me},{tag:[c.definition(c.name),c.separator],color:se},{tag:[c.typeName,c.className,c.number,c.changed,c.annotation,c.modifier,c.self,c.namespace],color:ar},{tag:[c.operator,c.operatorKeyword,c.url,c.escape,c.regexp,c.link,c.special(c.string)],color:or},{tag:[c.meta,c.comment],color:ge},{tag:c.strong,fontWeight:"bold"},{tag:c.emphasis,fontStyle:"italic"},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.link,color:ge,textDecoration:"underline"},{tag:c.heading,fontWeight:"bold",color:Se},{tag:[c.atom,c.bool,c.special(c.variableName)],color:Me},{tag:[c.processingInstruction,c.string,c.inserted],color:cr},{tag:c.invalid,color:lr}]),mr=[ur,be(gr)];var pr=S.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),H=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:a=!0,readOnly:i=!1,theme:n="light",placeholder:o="",basicSetup:l=!0}=e,s=[];switch(t&&s.unshift($e.of([Ut])),l&&(typeof l=="boolean"?s.unshift(ye()):s.unshift(ye(l))),o&&s.unshift(Vt(o)),n){case"light":s.push(pr);break;case"dark":s.push(mr);break;case"none":break;default:s.push(n);break}return a===!1&&s.push(S.editable.of(!1)),i&&s.push(I.readOnly.of(!0)),[...s]},vr=r=>({line:r.state.doc.lineAt(r.state.selection.main.from),lineCount:r.state.doc.lines,lineBreak:r.state.lineBreak,length:r.state.doc.length,readOnly:r.state.readOnly,tabSize:r.state.tabSize,selection:r.state.selection,selectionAsSingle:r.state.selection.asSingle().main,ranges:r.state.selection.ranges,selectionCode:r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to),selections:r.state.selection.ranges.map(e=>r.state.sliceDoc(e.from,e.to)),selectedText:r.state.selection.ranges.some(e=>!e.empty)}),De=Pt.define(),br=[];function Cr(r){var{value:e,selection:t,onChange:a,onStatistics:i,onCreateEditor:n,onUpdate:o,extensions:l=br,autoFocus:s,theme:f="light",height:d=null,minHeight:h=null,maxHeight:g=null,width:u=null,minWidth:m=null,maxWidth:v=null,placeholder:p="",editable:L=!0,readOnly:w=!1,indentWithTab:B=!0,basicSetup:A=!0,root:b,initialState:T}=r,[W,U]=k.useState(),[M,C]=k.useState(),[E,O]=k.useState(),V=S.theme({"&":{height:d,minHeight:h,maxHeight:g,width:u,minWidth:m,maxWidth:v},"& .cm-scroller":{height:"100% !important"}}),P=S.updateListener.of(D=>{if(D.docChanged&&typeof a=="function"&&!D.transactions.some(pt=>pt.annotation(De))){var Y=D.state.doc,re=Y.toString();a(re,D)}i&&i(vr(D))}),te=H({theme:f,editable:L,readOnly:w,placeholder:p,indentWithTab:B,basicSetup:A}),G=[P,V,...te];return o&&typeof o=="function"&&G.push(S.updateListener.of(o)),G=G.concat(l),k.useEffect(()=>{if(W&&!E){var D={doc:e,selection:t,extensions:G},Y=T?I.fromJSON(T.json,D,T.fields):I.create(D);if(O(Y),!M){var re=new S({state:Y,parent:W,root:b});C(re),n&&n(re,Y)}}return()=>{M&&(O(void 0),C(void 0))}},[W,E]),k.useEffect(()=>U(r.container),[r.container]),k.useEffect(()=>()=>{M&&(M.destroy(),C(void 0))},[M]),k.useEffect(()=>{s&&M&&M.focus()},[s,M]),k.useEffect(()=>{M&&M.dispatch({effects:q.reconfigure.of(G)})},[f,l,d,h,g,u,m,v,p,L,w,B,A,a,o]),k.useEffect(()=>{if(e!==void 0){var D=M?M.state.doc.toString():"";M&&e!==D&&M.dispatch({changes:{from:0,to:D.length,insert:e||""},annotations:[De.of(!0)]})}},[e,M]),{state:E,setState:O,view:M,setView:C,container:W,setContainer:U}}var xr=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],kr=k.forwardRef((r,e)=>{var{className:t,value:a="",selection:i,extensions:n=[],onChange:o,onStatistics:l,onCreateEditor:s,onUpdate:f,autoFocus:d,theme:h="light",height:g,minHeight:u,maxHeight:m,width:v,minWidth:p,maxWidth:L,basicSetup:w,placeholder:B,indentWithTab:A,editable:b,readOnly:T,root:W,initialState:U}=r,M=$(r,xr),C=k.useRef(null),{state:E,view:O,container:V}=Cr({container:C.current,root:W,value:a,autoFocus:d,theme:h,height:g,minHeight:u,maxHeight:m,width:v,minWidth:p,maxWidth:L,basicSetup:w,placeholder:B,indentWithTab:A,editable:b,readOnly:T,selection:i,onChange:o,onStatistics:l,onCreateEditor:s,onUpdate:f,extensions:n,initialState:U});if(k.useImperativeHandle(e,()=>({editor:C.current,state:E,view:O}),[C,V,E,O]),typeof a!="string")throw new Error("value must be typeof string but got "+typeof a);var P=typeof h=="string"?"cm-theme-"+h:"cm-theme";return R.jsx("div",x({ref:C,className:""+P+(t?" "+t:"")},M))});kr.displayName="CodeMirror";var Xe={modified:{doc:""},original:{doc:""}},et=k.createContext(Xe);function wr(r,e){return x({},r,e,{modified:x({},r.modified,e.modified),original:x({},r.original,e.original)})}var xe=()=>k.useContext(et),yr=r=>{var{children:e,theme:t}=r,[a,i]=k.useReducer(wr,x({},Xe,{theme:t}));return k.useEffect(()=>i({theme:t}),[t]),R.jsx(et.Provider,{value:x({},a,{dispatch:i}),children:e})},Sr=["extensions","value","selection","onChange"],tt=r=>{var{extensions:e=[],value:t,selection:a,onChange:i}=r,n=$(r,Sr),{theme:o,dispatch:l}=xe(),s=H(x({},n,{theme:o}));return k.useEffect(()=>l({original:{doc:t,selection:a,extensions:[...s,...e]},originalExtension:{onChange:i,option:n,extension:[e]}}),[r]),null};tt.displayName="CodeMirrorMerge.Original";var Mr=["extensions","value","selection","onChange"],rt=r=>{var{extensions:e=[],value:t,selection:a,onChange:i}=r,n=$(r,Mr),{theme:o,dispatch:l}=xe(),s=H(x({},n,{theme:o}));return k.useEffect(()=>{l({modified:{doc:t,selection:a,extensions:[...s,...e]},modifiedExtension:{onChange:i,option:n,extension:[e]}})},[r]),null};rt.displayName="CodeMirrorMerge.Modified";class y{constructor(e,t,a,i){this.fromA=e,this.toA=t,this.fromB=a,this.toB=i}offset(e,t){return new y(this.fromA+e,this.toA+e,this.fromB+t,this.toB+t)}}function K(r,e,t,a,i,n){if(r==a)return[];let o=ke(r,e,t,a,i,n),l=we(r,e+o,t,a,i+o,n);e+=o,t-=l,i+=o,n-=l;let s=t-e,f=n-i;if(!s||!f)return[new y(e,t,i,n)];if(s>f){let h=r.slice(e,t).indexOf(a.slice(i,n));if(h>-1)return[new y(e,e+h,i,i),new y(e+h+f,t,n,n)]}else if(f>s){let h=a.slice(i,n).indexOf(r.slice(e,t));if(h>-1)return[new y(e,e,i,i+h),new y(t,t,i+h+s,n)]}if(s==1||f==1)return[new y(e,t,i,n)];let d=at(r,e,t,a,i,n);if(d){let[h,g,u]=d;return K(r,e,h,a,i,g).concat(K(r,h+u,t,a,g+u,n))}return Ar(r,e,t,a,i,n)}let Z=1e9;function Ar(r,e,t,a,i,n){let o=t-e,l=n-i;if(Z<1e9&&Math.min(o,l)>Z*16)return Math.min(o,l)>Z*64?[new y(e,t,i,n)]:Ee(r,e,t,a,i,n);let s=Math.ceil((o+l)/2);fe.reset(s),he.reset(s);let f=(u,m)=>r.charCodeAt(e+u)==a.charCodeAt(i+m),d=(u,m)=>r.charCodeAt(t-u-1)==a.charCodeAt(n-m-1),h=(o-l)%2!=0?he:null,g=h?null:fe;for(let u=0;u<s;u++){if(u>Z)return Ee(r,e,t,a,i,n);let m=fe.advance(u,o,l,s,h,!1,f)||he.advance(u,o,l,s,g,!0,d);if(m)return Br(r,e,t,e+m[0],a,i,n,i+m[1])}return[new y(e,t,i,n)]}class nt{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let t=0;t<this.len;t++)this.vec[t]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,t,a,i,n,o,l){for(let s=-e+this.start;s<=e-this.end;s+=2){let f=i+s,d=s==-e||s!=e&&this.vec[f-1]<this.vec[f+1]?this.vec[f+1]:this.vec[f-1]+1,h=d-s;for(;d<t&&h<a&&l(d,h);)d++,h++;if(this.vec[f]=d,d>t)this.end+=2;else if(h>a)this.start+=2;else if(n){let g=i+(t-a)-s;if(g>=0&&g<this.len&&n.vec[g]!=-1)if(o){let u=n.vec[g];if(u>=t-d)return[u,i+u-g]}else{let u=t-n.vec[g];if(d>=u)return[d,h]}}}return null}}const fe=new nt,he=new nt;function Br(r,e,t,a,i,n,o,l){let s=!1;return!J(r,a)&&++a==t&&(s=!0),!J(i,l)&&++l==o&&(s=!0),s?[new y(e,t,n,o)]:K(r,e,a,i,n,l).concat(K(r,a,t,i,l,o))}function it(r,e){let t=1,a=Math.min(r,e);for(;t<a;)t=t<<1;return t}function ke(r,e,t,a,i,n){if(e==t||e==n||r.charCodeAt(e)!=a.charCodeAt(i))return 0;let o=it(t-e,n-i);for(let l=e,s=i;;){let f=l+o,d=s+o;if(f>t||d>n||r.slice(l,f)!=a.slice(s,d)){if(o==1)return l-e-(J(r,l)?0:1);o=o>>1}else{if(f==t||d==n)return f-e;l=f,s=d}}}function we(r,e,t,a,i,n){if(e==t||i==n||r.charCodeAt(t-1)!=a.charCodeAt(n-1))return 0;let o=it(t-e,n-i);for(let l=t,s=n;;){let f=l-o,d=s-o;if(f<e||d<i||r.slice(f,l)!=a.slice(d,s)){if(o==1)return t-l-(J(r,l)?0:1);o=o>>1}else{if(f==e||d==i)return t-f;l=f,s=d}}}function me(r,e,t,a,i,n,o,l){let s=a.slice(i,n),f=null;for(;;){if(f||o<l)return f;for(let d=e+o;;){J(r,d)||d++;let h=d+o;if(J(r,h)||(h+=h==d+1?1:-1),h>=t)break;let g=r.slice(d,h),u=-1;for(;(u=s.indexOf(g,u+1))!=-1;){let m=ke(r,h,t,a,i+u+g.length,n),v=we(r,e,d,a,i,i+u),p=g.length+m+v;(!f||f[2]<p)&&(f=[d-v,i+u-v,p])}d=h}if(l<0)return f;o=o>>1}}function at(r,e,t,a,i,n){let o=t-e,l=n-i;if(o<l){let s=at(a,i,n,r,e,t);return s&&[s[1],s[0],s[2]]}return o<4||l*2<o?null:me(r,e,t,a,i,n,Math.floor(o/4),-1)}function Ee(r,e,t,a,i,n){let o=t-e,l=n-i,s;if(o<l){let g=me(a,i,n,r,e,t,Math.floor(o/6),50);s=g&&[g[1],g[0],g[2]]}else s=me(r,e,t,a,i,n,Math.floor(l/6),50);if(!s)return[new y(e,t,i,n)];let[f,d,h]=s;return K(r,e,f,a,i,d).concat(K(r,f+h,t,a,d+h,n))}function ot(r,e){for(let t=1;t<r.length;t++){let a=r[t-1],i=r[t];a.toA>i.fromA-e&&a.toB>i.fromB-e&&(r[t-1]=new y(a.fromA,i.toA,a.fromB,i.toB),r.splice(t--,1))}}function Lr(r,e,t){for(;;){ot(t,1);let a=!1;for(let i=0;i<t.length;i++){let n=t[i],o,l;(o=ke(r,n.fromA,n.toA,e,n.fromB,n.toB))&&(n=t[i]=new y(n.fromA+o,n.toA,n.fromB+o,n.toB)),(l=we(r,n.fromA,n.toA,e,n.fromB,n.toB))&&(n=t[i]=new y(n.fromA,n.toA-l,n.fromB,n.toB-l));let s=n.toA-n.fromA,f=n.toB-n.fromB;if(s&&f)continue;let d=n.fromA-(i?t[i-1].toA:0),h=(i<t.length-1?t[i+1].fromA:r.length)-n.toA;if(!d||!h)continue;let g=s?r.slice(n.fromA,n.toA):e.slice(n.fromB,n.toB);d<=g.length&&r.slice(n.fromA-d,n.fromA)==g.slice(g.length-d)?(t[i]=new y(n.fromA-d,n.toA-d,n.fromB-d,n.toB-d),a=!0):h<=g.length&&r.slice(n.toA,n.toA+h)==g.slice(0,h)&&(t[i]=new y(n.fromA+h,n.toA+h,n.fromB+h,n.toB+h),a=!0)}if(!a)break}return t}function Dr(r,e,t){for(let a=0,i=0;i<r.length;i++){let n=r[i],o=n.toA-n.fromA,l=n.toB-n.fromB;if(o&&l||o>3||l>3){let s=i==r.length-1?e.length:r[i+1].fromA,f=n.fromA-a,d=s-n.toA,h=Ne(e,n.fromA,Math.min(f,5)),g=Oe(e,n.toA,Math.min(d,5)),u=n.fromA-h,m=g-n.toA;if(!o||!l){let v=Math.max(o,l),[p,L,w]=o?[e,n.fromA,n.toA]:[t,n.fromB,n.toB],B,A;u&&m?(v>u&&e.slice(h,n.fromA)==p.slice(w-u,w)?(n=r[i]=new y(h,h+o,n.fromB-u,n.toB-u),h=n.fromA,g=Oe(e,n.toA,Math.min(s-n.toA,5))):v>m&&e.slice(n.toA,g)==p.slice(L,L+m)&&(n=r[i]=new y(g-o,g,n.fromB+m,n.toB+m),g=n.toA,h=Ne(e,n.fromA,Math.min(n.fromA-a,5))),u=n.fromA-h,m=g-n.toA):!u&&!m&&(A=n.fromA-(B=Er(e,n.fromA,f)))&&e.slice(B,n.fromA)==p.slice(w-A,w)&&(n=r[i]=new y(B,B+o,n.fromB-A,n.toB-A))}(u||m)&&(n=r[i]=new y(n.fromA-u,n.toA+m,n.fromB-u,n.toB+m)),a=n.toA}}return ot(r,3),r}let j;try{j=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch{}function lt(r){return r>48&&r<58||r>64&&r<91||r>96&&r<123}function st(r,e){if(e==r.length)return 0;let t=r.charCodeAt(e);return t<192?lt(t)?1:0:j?!dt(t)||e==r.length-1?j.test(String.fromCharCode(t))?1:0:j.test(r.slice(e,e+2))?2:0:0}function ct(r,e){if(!e)return 0;let t=r.charCodeAt(e-1);return t<192?lt(t)?1:0:j?!ft(t)||e==1?j.test(String.fromCharCode(t))?1:0:j.test(r.slice(e-2,e))?2:0:0}function Oe(r,e,t){if(e==r.length||!ct(r,e))return e;for(let a=e,i=e+t;;){let n=st(r,a);if(!n)return a;if(a+=n,a>i)return e}}function Ne(r,e,t){if(!e||!st(r,e))return e;for(let a=e,i=e-t;;){let n=ct(r,a);if(!n)return a;if(a-=n,a<i)return e}}function Er(r,e,t){for(let a=e,i=e-t;;){let n=a?r.charCodeAt(a-1):10;if(n==10)return a;if(a--,a<i||n!=32&&n!=9)return e}}const dt=r=>r>=55296&&r<=56319,ft=r=>r>=56320&&r<=57343;function J(r,e){return!e||e==r.length||!dt(r.charCodeAt(e-1))||!ft(r.charCodeAt(e))}function Or(r,e,t){var a;return Z=((a=t==null?void 0:t.scanLimit)!==null&&a!==void 0?a:1e9)>>1,Lr(r,e,K(r,0,r.length,e,0,e.length))}function ht(r,e,t){return Dr(Or(r,e,t),r,e)}const F=qt.define({combine:r=>r[0]}),pe=q.define(),Q=Ce.define({create(r){return null},update(r,e){for(let t of e.effects)t.is(pe)&&(r=t.value);return r}});class z{constructor(e,t,a,i,n){this.changes=e,this.fromA=t,this.toA=a,this.fromB=i,this.toB=n}offset(e,t){return e||t?new z(this.changes,this.fromA+e,this.toA+e,this.fromB+t,this.toB+t):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,t,a){return ut(ht(e.toString(),t.toString(),a),e,t,0,0)}static updateA(e,t,a,i,n){return We(Ge(e,i,!0,a.length),e,t,a,n)}static updateB(e,t,a,i,n){return We(Ge(e,i,!1,t.length),e,t,a,n)}}function Te(r,e,t,a){let i=t.lineAt(r),n=a.lineAt(e);return i.to==r&&n.to==e&&r<t.length&&e<a.length?[r+1,e+1]:[i.from,n.from]}function Re(r,e,t,a){let i=t.lineAt(r),n=a.lineAt(e);return i.from==r&&n.from==e?[r,e]:[i.to+1,n.to+1]}function ut(r,e,t,a,i){let n=[];for(let o=0;o<r.length;o++){let l=r[o],[s,f]=Te(l.fromA+a,l.fromB+i,e,t),[d,h]=Re(l.toA+a,l.toB+i,e,t),g=[l.offset(-s+a,-f+i)];for(;o<r.length-1;){let u=r[o+1],[m,v]=Te(u.fromA+a,u.fromB+i,e,t);if(m>d+1&&v>h+1)break;g.push(u.offset(-s+a,-f+i)),[d,h]=Re(u.toA+a,u.toB+i,e,t),o++}n.push(new z(g,s,Math.max(s,d),f,Math.max(f,h)))}return n}const ne=1e3;function Fe(r,e,t,a){let i=0,n=r.length;for(;;){if(i==n){let d=0,h=0;i&&({toA:d,toB:h}=r[i-1]);let g=e-(t?d:h);return[d+g,h+g]}let o=i+n>>1,l=r[o],[s,f]=t?[l.fromA,l.toA]:[l.fromB,l.toB];if(s>e)n=o;else if(f<=e)i=o+1;else return a?[l.fromA,l.fromB]:[l.toA,l.toB]}}function Ge(r,e,t,a){let i=[];return e.iterChangedRanges((n,o,l,s)=>{let f=0,d=t?e.length:a,h=0,g=t?a:e.length;n>ne&&([f,h]=Fe(r,n-ne,t,!0)),o<e.length-ne&&([d,g]=Fe(r,o+ne,t,!1));let u=s-l-(o-n),m,[v,p]=t?[u,0]:[0,u];i.length&&(m=i[i.length-1]).toA>=f?i[i.length-1]={fromA:m.fromA,fromB:m.fromB,toA:d,toB:g,diffA:m.diffA+v,diffB:m.diffB+p}:i.push({fromA:f,toA:d,fromB:h,toB:g,diffA:v,diffB:p})}),i}function We(r,e,t,a,i){if(!r.length)return e;let n=[];for(let o=0,l=0,s=0,f=0;;o++){let d=o==r.length?null:r[o],h=d?d.fromA+l:t.length,g=d?d.fromB+s:a.length;for(;f<e.length;){let p=e[f];if(p.toA+l>h||p.toB+s>g)break;n.push(p.offset(l,s)),f++}if(!d)break;let u=d.toA+l+d.diffA,m=d.toB+s+d.diffB,v=ht(t.sliceString(h,u),a.sliceString(g,m),i);for(let p of ut(v,t,a,h,g))n.push(p);for(l+=d.diffA,s+=d.diffB;f<e.length;){let p=e[f];if(p.fromA+l>u&&p.fromB+s>m)break;f++}}return n}const gt=$t.fromClass(class{constructor(r){({deco:this.deco,gutter:this.gutter}=je(r))}update(r){(r.docChanged||r.viewportChanged||Nr(r.startState,r.state)||Tr(r.startState,r.state))&&({deco:this.deco,gutter:this.gutter}=je(r.view))}},{decorations:r=>r.deco}),ie=Je.low(Jt({class:"cm-changeGutter",markers:r=>{var e;return((e=r.plugin(gt))===null||e===void 0?void 0:e.gutter)||ue.empty}}));function Nr(r,e){return r.field(Q,!1)!=e.field(Q,!1)}function Tr(r,e){return r.facet(F)!=e.facet(F)}const Ie=N.line({class:"cm-changedLine"}),Rr=N.mark({class:"cm-changedText"}),Fr=N.mark({tagName:"ins",class:"cm-insertedLine"}),Gr=N.mark({tagName:"del",class:"cm-deletedLine"}),He=new class extends Yt{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function Wr(r,e,t,a,i,n){let o=t?r.fromA:r.fromB,l=t?r.toA:r.toB,s=0;if(o!=l){i.add(o,o,Ie),i.add(o,l,t?Gr:Fr),n&&n.add(o,o,He);for(let f=e.iterRange(o,l-1),d=o;!f.next().done;){if(f.lineBreak){d++,i.add(d,d,Ie),n&&n.add(d,d,He);continue}let h=d+f.value.length;if(a)for(;s<r.changes.length;){let g=r.changes[s],u=o+(t?g.fromA:g.fromB),m=o+(t?g.toA:g.toB),v=Math.max(d,u),p=Math.min(h,m);if(v<p&&i.add(v,p,Rr),m<h)s++;else break}d=h}}}function je(r){let e=r.state.field(Q),{side:t,highlightChanges:a,markGutter:i}=r.state.facet(F),n=t=="a",o=new X,l=i?new X:null,{from:s,to:f}=r.viewport;for(let d of e){if((n?d.fromA:d.fromB)>=f)break;(n?d.toA:d.toB)>s&&Wr(d,r.state.doc,n,a,o,l)}return{deco:o.finish(),gutter:l&&l.finish()}}class ae extends Ye{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const ce=q.define({map:(r,e)=>r.map(e)}),_=Ce.define({create:()=>N.none,update:(r,e)=>{for(let t of e.effects)if(t.is(ce))return t.value;return r.map(e.changes)},provide:r=>S.decorations.from(r)}),oe=.01;function Ir(r,e,t){let a=new X,i=new X,n=r.state.field(_).iter(),o=e.state.field(_).iter(),l=0,s=0,f=0,d=0;for(let m=0;;m++){let v=m<t.length?t[m]:null;if(l<(v?v.fromA:r.state.doc.length)){let p=r.lineBlockAt(l).top+f,L=e.lineBlockAt(s).top+d,w=p-L;w<-oe?(f-=w,a.add(l,l,N.widget({widget:new ae(-w),block:!0,side:-1}))):w>oe&&(d+=w,i.add(s,s,N.widget({widget:new ae(w),block:!0,side:-1})))}if(!v)break;for(l=v.toA,s=v.toB;n.value&&n.from<l;)f-=n.value.spec.widget.height,n.next();for(;o.value&&o.from<s;)d-=o.value.spec.widget.height,o.next()}for(;n.value;)f-=n.value.spec.widget.height,n.next();for(;o.value;)d-=o.value.spec.widget.height,o.next();let h=r.contentHeight+f-(e.contentHeight+d);h<oe?a.add(r.state.doc.length,r.state.doc.length,N.widget({widget:new ae(-h),block:!0,side:1})):h>oe&&i.add(e.state.doc.length,e.state.doc.length,N.widget({widget:new ae(h),block:!0,side:1}));let g=a.finish(),u=i.finish();ue.eq([g],[r.state.field(_)])||r.dispatch({effects:ce.of(g)}),ue.eq([u],[e.state.field(_)])||e.dispatch({effects:ce.of(u)})}const ve=q.define({map:(r,e)=>e.mapPos(r)});class Hr extends Ye{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent="⦚ "+e.state.phrase("$ unchanged lines",this.lines)+" ⦚",t.addEventListener("click",a=>{let i=e.posAtDOM(a.target);e.dispatch({effects:ve.of(i)});let{side:n,sibling:o}=e.state.facet(F);o&&o().dispatch({effects:ve.of(jr(i,e.state.field(Q),n=="a"))})}),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}function jr(r,e,t){let a=0,i=0;for(let n=0;;n++){let o=n<e.length?e[n]:null;if(!o||(t?o.fromA:o.fromB)>=r)return i+(r-a);[a,i]=t?[o.toA,o.toB]:[o.toB,o.toA]}}const Kr=Ce.define({create(r){return N.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)t.is(ve)&&(r=r.update({filter:a=>a!=t.value}));return r},provide:r=>S.decorations.from(r)});function Ke({margin:r=3,minSize:e=4}){return Kr.init(t=>Ur(t,r,e))}function Ur(r,e,t){let a=new X,i=r.facet(F).side=="a",n=r.field(Q),o=1;for(let l=0;;l++){let s=l<n.length?n[l]:null,f=l?o+e:1,d=s?r.doc.lineAt(i?s.fromA:s.fromB).number-1-e:r.doc.lines,h=d-f+1;if(h>=t&&a.add(r.doc.line(f).from,r.doc.line(d).to,N.replace({widget:new Hr(h),block:!0})),!s)break;o=r.doc.lineAt(Math.min(r.doc.length,i?s.toA:s.toB)).number}return a.finish()}const Vr=S.styleModule.of(new Qt({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),Pr=S.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),Ue=new Qe,le=new Qe;class Ve{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig;let t=[Je.low(gt),Pr,Vr,_,S.updateListener.of(h=>{this.measuring<0&&(h.heightChanged||h.viewportChanged)&&!h.transactions.some(g=>g.effects.some(u=>u.is(ce)))&&this.measure()})],a=[F.of({side:"a",sibling:()=>this.b,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&a.push(ie);let i=I.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],S.editorAttributes.of({class:"cm-merge-a"}),le.of(a),t]}),n=[F.of({side:"b",sibling:()=>this.a,highlightChanges:e.highlightChanges!==!1,markGutter:e.gutter!==!1})];e.gutter!==!1&&n.push(ie);let o=I.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],S.editorAttributes.of({class:"cm-merge-b"}),le.of(n),t]});this.chunks=z.build(i.doc,o.doc,this.diffConf);let l=[Q.init(()=>this.chunks),Ue.of(e.collapseUnchanged?Ke(e.collapseUnchanged):[])];i=i.update({effects:q.appendConfig.of(l)}).state,o=o.update({effects:q.appendConfig.of(l)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let s=e.orientation||"a-b",f=document.createElement("div");f.className="cm-mergeViewEditor";let d=document.createElement("div");d.className="cm-mergeViewEditor",this.editorDOM.appendChild(s=="a-b"?f:d),this.editorDOM.appendChild(s=="a-b"?d:f),this.a=new S({state:i,parent:f,root:e.root,dispatchTransactions:h=>this.dispatch(h,this.a)}),this.b=new S({state:o,parent:d,root:e.root,dispatchTransactions:h=>this.dispatch(h,this.b)}),this.setupRevertControls(!!e.revertControls,e.revertControls=="b-to-a",e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,t){if(e.some(a=>a.docChanged)){let a=e[e.length-1],i=e.reduce((o,l)=>o.compose(l.changes),zt.empty(e[0].startState.doc.length));this.chunks=t==this.a?z.updateA(this.chunks,a.newDoc,this.b.state.doc,i,this.diffConf):z.updateB(this.chunks,this.a.state.doc,a.newDoc,i,this.diffConf),t.update([...e,a.state.update({effects:pe.of(this.chunks)})]);let n=t==this.a?this.b:this.a;n.update([n.state.update({effects:pe.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let n=e.orientation!="b-a";if(n!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let o=this.a.dom.parentNode,l=this.b.dom.parentNode;o.remove(),l.remove(),this.editorDOM.insertBefore(n?o:l,this.editorDOM.firstChild),this.editorDOM.appendChild(n?l:o),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let n=!!this.revertDOM,o=this.revertToA,l=this.renderRevert;"revertControls"in e&&(n=!!e.revertControls,o=e.revertControls=="b-to-a"),"renderRevertControl"in e&&(l=e.renderRevertControl),this.setupRevertControls(n,o,l)}let t="highlightChanges"in e,a="gutter"in e,i="collapseUnchanged"in e;if(t||a||i){let n=[],o=[];if(t||a){let l=this.a.state.facet(F),s=a?e.gutter!==!1:l.markGutter,f=t?e.highlightChanges!==!1:l.highlightChanges;n.push(le.reconfigure([F.of({side:"a",sibling:()=>this.b,highlightChanges:f,markGutter:s}),s?ie:[]])),o.push(le.reconfigure([F.of({side:"b",sibling:()=>this.a,highlightChanges:f,markGutter:s}),s?ie:[]]))}if(i){let l=Ue.reconfigure(e.collapseUnchanged?Ke(e.collapseUnchanged):[]);n.push(l),o.push(l)}this.a.dispatch({effects:n}),this.b.dispatch({effects:o})}this.scheduleMeasure()}setupRevertControls(e,t,a){this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=a,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",i=>this.revertClicked(i)),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame(()=>{this.measuring=-1,this.measure()})}}measure(){Ir(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,t=e.firstChild,a=this.a.viewport,i=this.b.viewport;for(let n=0;n<this.chunks.length;n++){let o=this.chunks[n];if(o.fromA>a.to||o.fromB>i.to)break;if(o.fromA<a.from||o.fromB<i.from)continue;let l=this.a.lineBlockAt(o.fromA).top+"px";for(;t&&+t.dataset.chunk<n;)t=Pe(t);t&&t.dataset.chunk==String(n)?(t.style.top!=l&&(t.style.top=l),t=t.nextSibling):e.insertBefore(this.renderRevertButton(l,n),t)}for(;t;)t=Pe(t)}renderRevertButton(e,t){let a;if(this.renderRevert)a=this.renderRevert();else{a=document.createElement("button");let i=this.a.state.phrase("Revert this chunk");a.setAttribute("aria-label",i),a.setAttribute("title",i),a.textContent=this.revertToLeft?"⇜":"⇝"}return a.style.top=e,a.setAttribute("data-chunk",String(t)),a}revertClicked(e){let t=e.target,a;for(;t&&t.parentNode!=this.revertDOM;)t=t.parentNode;if(t&&(a=this.chunks[t.dataset.chunk])){let[i,n,o,l,s,f]=this.revertToA?[this.b,this.a,a.fromB,a.toB,a.fromA,a.toA]:[this.a,this.b,a.fromA,a.toA,a.fromB,a.toB],d=i.state.sliceDoc(o,Math.max(o,l-1));o!=l&&f<=n.state.doc.length&&(d+=i.state.lineBreak),n.dispatch({changes:{from:s,to:Math.min(n.state.doc.length,f),insert:d},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function Pe(r){let e=r.nextSibling;return r.remove(),e}var zr=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl"],qr=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],mt=Ze.forwardRef((r,e)=>{var{className:t,children:a,orientation:i,revertControls:n,highlightChanges:o,gutter:l,collapseUnchanged:s,destroyRerender:f=!0,renderRevertControl:d}=r,h=$(r,zr),g=xe(),{modified:u,modifiedExtension:m,original:v,originalExtension:p,theme:L,dispatch:w}=g,B=$(g,qr),A=k.useRef(null),b=k.useRef(),T={orientation:i,revertControls:n,highlightChanges:o,gutter:l,collapseUnchanged:s,renderRevertControl:d};k.useImperativeHandle(e,()=>({container:A.current,view:b.current,modified:u,original:v,config:x({a:v,b:u,parent:A.current},T)}),[A,b,u,v,T]);var W=S.updateListener.of(C=>{if(C.docChanged&&typeof(p==null?void 0:p.onChange)=="function"){var E=C.state.doc,O=E.toString();p==null||p.onChange(O,C)}}),U=S.updateListener.of(C=>{if(C.docChanged&&typeof(m==null?void 0:m.onChange)=="function"){var E=C.state.doc,O=E.toString();m==null||m.onChange(O,C)}});k.useEffect(()=>{!b.current&&A.current&&p&&m&&(b.current=new Ve(x({a:x({},v,{extensions:[...(p==null?void 0:p.extension)||[],...H(x({},p==null?void 0:p.option,{theme:L})),W]}),b:x({},u,{extensions:[...(m==null?void 0:m.extension)||[],...H(x({},m==null?void 0:m.option,{theme:L})),U]}),parent:A.current},T)),w({view:b.current}))},[b,A,p,m]),k.useEffect(()=>{if(v&&v.doc&&b.current){var C,E=(C=b.current)==null?void 0:C.a.state.doc.toString();if(E!==v.doc){var O;(O=b.current)==null||O.a.dispatch({changes:{from:0,to:E.length,insert:v.doc||""}})}}if(u&&u.doc&&b.current){var V,P=(V=b.current)==null?void 0:V.b.state.doc.toString();if(P!==u.doc){var te;(te=b.current)==null||te.b.dispatch({changes:{from:0,to:P.length,insert:u.doc||""}})}}if(f&&b.current){var G=b.current.a.state.selection.ranges[0].from,D=b.current.b.state.selection.ranges[0].from;b.current.destroy(),b.current=new Ve(x({a:x({},v,{extensions:[...(p==null?void 0:p.extension)||[],...H(x({},p==null?void 0:p.option,{theme:L}))]}),b:x({},u,{extensions:[...(m==null?void 0:m.extension)||[],...H(x({},m==null?void 0:m.option,{theme:L}))]}),parent:A.current},T)),G&&(b.current.a.focus(),b.current.a.dispatch({selection:{anchor:G,head:G}})),D&&(b.current.b.focus(),b.current.b.dispatch({selection:{anchor:D,head:D}}))}},[b,L,A.current,v,u,p,m,f]),k.useEffect(()=>()=>b.current&&b.current.destroy(),[]),k.useEffect(()=>{if(b.current){var C={};B.orientation!==i&&(C.orientation=i),B.revertControls!==n&&(C.revertControls=n),B.highlightChanges!==o&&(C.highlightChanges=o),B.gutter!==l&&(C.gutter=l),B.collapseUnchanged!==s&&(C.collapseUnchanged=s),B.renderRevertControl!==d&&(C.collapseUnchanged=s),Object.keys(C).length&&w&&b.current&&(b.current.reconfigure(x({},C)),w(x({},C)))}},[w,b,i,n,o,l,s,d]);var M="cm-merge-theme";return R.jsx("div",x({ref:A,className:""+M+(t?" "+t:"")},h,{children:a}))});mt.displayName="CodeMirrorMerge.Internal";var $r=["theme"],Jr=Ze.forwardRef((r,e)=>{var{theme:t}=r,a=$(r,$r);return R.jsx(yr,{theme:t,children:R.jsx(mt,x({},a,{ref:e}))})}),ee=Jr;ee.Original=tt;ee.Modified=rt;ee.displayName="CodeMirrorMerge";const{Original:Qr,Modified:Yr}=ee,ze=`one
twod
three
four
five`,tn=()=>R.jsx(vt,{children:R.jsx(Zt,{className:"h-full overflow-auto",children:R.jsxs(ee,{orientation:"a-b",revertControls:"a-to-b",theme:tr,lang:"plain",children:[R.jsx(Qr,{value:ze,extensions:[S.editable.of(!0),I.readOnly.of(!1)]}),R.jsx(Yr,{value:`${ze.replace(/t/g,"T")}Six`,extensions:[S.editable.of(!0),I.readOnly.of(!1)]})]})})});export{tn as Component};
