import{s as J,j as E,P as L}from"./pro-components-DqS1vNmp.js";import{_ as x}from"./lodash-C0aLGv2g.js";import{r as b,J as P,R as C,ay as A}from"./antd-2qrym3SB.js";import{u as H}from"./index-BkSZUkhJ.js";import{B as z,a as U}from"./jsoneditor-EB9WOjbk.js";import{L as k,U as M,g as B,i as F,b as $,c as K,d as W,p as q,e as Z,a as G,s as Q,t as X,f as Y}from"./stringify-CDcTTVEr.js";import"./index-Zzt7kOGj.js";function V(e){throw new Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")}function ee(e,t){return typeof t=="string"&&te.test(t)?new Date(t):t}const te=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/,re=Object.freeze(Object.defineProperty({__proto__:null,LosslessNumber:k,UnsafeNumberReason:M,config:V,getUnsafeNumberReason:B,isInteger:F,isLosslessNumber:$,isNumber:K,isSafeNumber:W,parse:q,parseLosslessNumber:Z,parseNumberAndBigInt:G,reviveDate:ee,stringify:Q,toLosslessNumber:X,toSafeNumberOrThrow:Y},Symbol.toStringTag,{value:"Module"}));var ne={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const I=e=>{let t;const n=new Set,o=(p,d)=>{const l=typeof p=="function"?p(t):p;if(!Object.is(l,t)){const h=t;t=d??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(S=>S(t,h))}},s=()=>t,m={setState:o,getState:s,getInitialState:()=>c,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(ne?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(o,s,m);return m},oe=e=>e?I(e):I;var D={exports:{}},N={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _=b,se=J;function ae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ie=typeof Object.is=="function"?Object.is:ae,ue=se.useSyncExternalStore,ce=_.useRef,le=_.useEffect,de=_.useMemo,fe=_.useDebugValue;N.useSyncExternalStoreWithSelector=function(e,t,n,o,s){var r=ce(null);if(r.current===null){var f={hasValue:!1,value:null};r.current=f}else f=r.current;r=de(function(){function m(h){if(!c){if(c=!0,p=h,h=o(h),s!==void 0&&f.hasValue){var S=f.value;if(s(S,h))return d=S}return d=h}if(S=d,ie(p,h))return S;var u=o(h);return s!==void 0&&s(S,u)?S:(p=h,d=u)}var c=!1,p,d,l=n===void 0?null:n;return[function(){return m(t())},l===null?void 0:function(){return m(l())}]},[t,n,o,s]);var v=ue(e,r[0],r[1]);return le(function(){f.hasValue=!0,f.value=v},[v]),fe(v),v};D.exports=N;var me=D.exports;const ve=P(me);var T={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:he}=C,{useSyncExternalStoreWithSelector:Se}=ve;let w=!1;const pe=e=>e;function ge(e,t=pe,n){(T?"production":void 0)!=="production"&&n&&!w&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),w=!0);const o=Se(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return he(o),o}const j=e=>{(T?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?oe(e):e,n=(o,s)=>ge(t,o,s);return Object.assign(n,t),n},ye=e=>e?j(e):j;var be={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function O(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var r;const f=m=>m===null?null:JSON.parse(m,t==null?void 0:t.reviver),v=(r=n.getItem(s))!=null?r:null;return v instanceof Promise?v.then(f):f(v)},setItem:(s,r)=>n.setItem(s,JSON.stringify(r,t==null?void 0:t.replacer)),removeItem:s=>n.removeItem(s)}}const R=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(o){return R(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return R(o)(n)}}}},Ee=(e,t)=>(n,o,s)=>{let r={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:i=>i,version:0,merge:(i,g)=>({...g,...i}),...t},f=!1;const v=new Set,m=new Set;let c;try{c=r.getStorage()}catch{}if(!c)return e((...i)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...i)},o,s);const p=R(r.serialize),d=()=>{const i=r.partialize({...o()});let g;const a=p({state:i,version:r.version}).then(y=>c.setItem(r.name,y)).catch(y=>{g=y});if(g)throw g;return a},l=s.setState;s.setState=(i,g)=>{l(i,g),d()};const h=e((...i)=>{n(...i),d()},o,s);let S;const u=()=>{var i;if(!c)return;f=!1,v.forEach(a=>a(o()));const g=((i=r.onRehydrateStorage)==null?void 0:i.call(r,o()))||void 0;return R(c.getItem.bind(c))(r.name).then(a=>{if(a)return r.deserialize(a)}).then(a=>{if(a)if(typeof a.version=="number"&&a.version!==r.version){if(r.migrate)return r.migrate(a.state,a.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return a.state}).then(a=>{var y;return S=r.merge(a,(y=o())!=null?y:h),n(S,!0),d()}).then(()=>{g==null||g(S,void 0),f=!0,m.forEach(a=>a(S))}).catch(a=>{g==null||g(void 0,a)})};return s.persist={setOptions:i=>{r={...r,...i},i.getStorage&&(c=i.getStorage())},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>u(),hasHydrated:()=>f,onHydrate:i=>(v.add(i),()=>{v.delete(i)}),onFinishHydration:i=>(m.add(i),()=>{m.delete(i)})},u(),S||h},Re=(e,t)=>(n,o,s)=>{let r={storage:O(()=>localStorage),partialize:u=>u,version:0,merge:(u,i)=>({...i,...u}),...t},f=!1;const v=new Set,m=new Set;let c=r.storage;if(!c)return e((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...u)},o,s);const p=()=>{const u=r.partialize({...o()});return c.setItem(r.name,{state:u,version:r.version})},d=s.setState;s.setState=(u,i)=>{d(u,i),p()};const l=e((...u)=>{n(...u),p()},o,s);s.getInitialState=()=>l;let h;const S=()=>{var u,i;if(!c)return;f=!1,v.forEach(a=>{var y;return a((y=o())!=null?y:l)});const g=((i=r.onRehydrateStorage)==null?void 0:i.call(r,(u=o())!=null?u:l))||void 0;return R(c.getItem.bind(c))(r.name).then(a=>{if(a)if(typeof a.version=="number"&&a.version!==r.version){if(r.migrate)return r.migrate(a.state,a.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return a.state}).then(a=>{var y;return h=r.merge(a,(y=o())!=null?y:l),n(h,!0),p()}).then(()=>{g==null||g(h,void 0),h=o(),f=!0,m.forEach(a=>a(h))}).catch(a=>{g==null||g(void 0,a)})};return s.persist={setOptions:u=>{r={...r,...u},u.storage&&(c=u.storage)},clearStorage:()=>{c==null||c.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>S(),hasHydrated:()=>f,onHydrate:u=>(v.add(u),()=>{v.delete(u)}),onFinishHydration:u=>(m.add(u),()=>{m.delete(u)})},r.skipHydration||S(),h||l},xe=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((be?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ee(e,t)):Re(e,t),_e=xe,Ie=ye()(_e((e,t)=>({jsonTabs:["0"],activeKey:"0",addJsonTab:n=>e(()=>({jsonTabs:x.concat(t().jsonTabs,n)})),removeJsonTab:n=>e(()=>({jsonTabs:x.without(t().jsonTabs,n)})),setActiveKey:n=>e(()=>({activeKey:n}))}),{name:"json-tab-store",storage:O(()=>localStorage)})),we=e=>{const t=b.useRef(null),n=b.useRef();return b.useEffect(()=>{const o={target:t.current,props:{}};return n.current=new z(o),()=>{n.current&&(n.current.destroy(),n.current=void 0)}},[]),b.useEffect(()=>{var o;n.current&&((o=n.current)==null||o.updateProps({...e,parser:re}))},[e]),E.jsx("div",{className:"h-full",ref:t})},je=e=>{const t={mode:"text",content:{text:""}},n=(e==null?void 0:e.idx)||"0",[o,s]=H(`json-${n}`,{defaultValue:t}),r=()=>o==null?U.text:o.mode,f=m=>{s(c=>({...c,content:m}))},v=m=>{s(c=>({...c,mode:m}))};return E.jsx(we,{mode:r(),content:o.content,onChange:f,onChangeMode:v})},Ce=()=>{const{jsonTabs:e,activeKey:t,addJsonTab:n,removeJsonTab:o,setActiveKey:s}=Ie(),[r,f]=b.useState([]);b.useEffect(()=>{const d=e.map(l=>({key:l,label:l,closable:!0,children:E.jsx(je,{idx:l}),className:"h-[calc(100dvh-112px)] md:h-[calc(100dvh-56px)]"}));if(x.indexOf(e,t)===-1){const l=x.last(d);s((l==null?void 0:l.key)||"0")}f(d)},[e,t,s]);const v=d=>{s(d)},m=(d,l)=>{l==="add"?c():p(d)},c=()=>{let d="0";if(e&&e.length>0){const l=e.map(S=>Number(S));d=`${Math.max(...l)+1}`}n(d),s(d)},p=d=>{o(String(d)),localStorage.removeItem(`json-${d}`),e&&e.length<=1&&n("0")};return E.jsx(L,{title:!1,className:"w-full",children:E.jsx(A,{type:"editable-card",size:"small",onChange:v,activeKey:t,onEdit:m,items:r})})};export{Ce as Component};
//# sourceMappingURL=index-B39VIiXm.js.map
