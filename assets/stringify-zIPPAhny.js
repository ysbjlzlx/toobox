var v=Object.defineProperty;var nn=(n,t,i)=>t in n?v(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i;var G=(n,t,i)=>nn(n,typeof t!="symbol"?t+"":t,i);function x(n){return en.test(n)}const en=/^-?[0-9]+$/;function X(n){return tn.test(n)}const tn=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function rn(n,t){const i=parseFloat(n),e=String(i),c=L(n),w=L(e);return!!(c===w||(t==null?void 0:t.approx)===!0&&!x(n)&&w.length>=14&&c.startsWith(w.substring(0,14)))}let m=function(n){return n.underflow="underflow",n.overflow="overflow",n.truncate_integer="truncate_integer",n.truncate_float="truncate_float",n}({});function P(n){if(rn(n,{approx:!1}))return;if(x(n))return m.truncate_integer;const t=parseFloat(n);return isFinite(t)?t===0?m.underflow:m.truncate_float:m.overflow}function Jn(n,t){const i=parseFloat(n),e=P(n);if((t==null?void 0:t.approx)===!0?e&&e!==m.truncate_float:e){const c=e==null?void 0:e.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${n}' would ${c} and become ${i}`)}return i}function L(n){return n.replace(on,"").replace(sn,"").replace(fn,"").replace(cn,"")}const on=/[eE][+-]?\d+$/,cn=/^-?(0*)?/,sn=/\./,fn=/0+$/;class U{constructor(t){G(this,"isLosslessNumber",!0);if(!X(t))throw new Error('Invalid number (value: "'+t+'")');this.value=t}valueOf(){const t=P(this.value);if(t===void 0||t===m.truncate_float)return parseFloat(this.value);if(x(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${parseFloat(this.value)}`)}toString(){return this.value}}function un(n){return n&&typeof n=="object"&&n.isLosslessNumber===!0||!1}function Vn(n){if(L(n+"").length>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${n})`);if(isNaN(n))throw new Error("Invalid number: NaN");if(!isFinite(n))throw new Error("Invalid number: "+n);return new U(String(n))}function an(n){return new U(n)}function Xn(n){return x(n)?BigInt(n):parseFloat(n)}function dn(n,t){return F({"":n},"",n,t)}function F(n,t,i,e){return Array.isArray(i)?e.call(n,t,hn(i,e)):i&&typeof i=="object"&&!un(i)?e.call(n,t,ln(i,e)):e.call(n,t,i)}function ln(n,t){return Object.keys(n).forEach(i=>{const e=F(n,i,n[i],t);e!==void 0?n[i]=e:delete n[i]}),n}function hn(n,t){for(let i=0;i<n.length;i++)n[i]=F(n,i+"",n[i],t);return n}function Pn(n,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:an,e=0;const c=C();return d(c),y(),t?dn(c,t):c;function w(){if(n.charCodeAt(e)===An){e++,p();const r={};let f=!0;for(;e<n.length&&n.charCodeAt(e)!==T;){f?f=!1:(a(),p());const g=e,$=o();if($===void 0){q();return}p(),s();const _=C();if(_===void 0){H();return}Object.prototype.hasOwnProperty.call(r,$)&&!R(_,r[$])&&K($,g+1),r[$]=_}return n.charCodeAt(e)!==T&&Z(),e++,r}}function E(){if(n.charCodeAt(e)===mn){e++,p();const r=[];let f=!0;for(;e<n.length&&n.charCodeAt(e)!==J;){f?f=!1:a();const g=C();l(g),r.push(g)}return n.charCodeAt(e)!==J&&M(),e++,r}}function C(){p();const r=o()??u()??w()??E()??b("true",!0)??b("false",!1)??b("null",null);return p(),r}function b(r,f){if(n.slice(e,e+r.length)===r)return e+=r.length,f}function p(){for(;pn(n.charCodeAt(e));)e++}function o(){if(n.charCodeAt(e)===D){e++;let r="";for(;e<n.length&&n.charCodeAt(e)!==D;){if(n.charCodeAt(e)===En){const f=n[e+1],g=gn[f];g!==void 0?(r+=g,e++):f==="u"?O(n.charCodeAt(e+2))&&O(n.charCodeAt(e+3))&&O(n.charCodeAt(e+4))&&O(n.charCodeAt(e+5))?(r+=String.fromCharCode(parseInt(n.slice(e+2,e+6),16)),e+=5):z(e):W(e)}else yn(n.charCodeAt(e))?r+=n[e]:Q(n[e]);e++}return N(),e++,r}}function u(){const r=e;if(n.charCodeAt(e)===V&&(e++,A(r)),n.charCodeAt(e)===j)e++;else if(wn(n.charCodeAt(e)))for(e++;I(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===xn)for(e++,A(r);I(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===Fn||n.charCodeAt(e)===Rn)for(e++,(n.charCodeAt(e)===V||n.charCodeAt(e)===Nn)&&e++,A(r);I(n.charCodeAt(e));)e++;if(e>r)return i(n.slice(r,e))}function a(){if(n.charCodeAt(e)!==In)throw new SyntaxError(`Comma ',' expected after value ${h()}`);e++}function s(){if(n.charCodeAt(e)!==_n)throw new SyntaxError(`Colon ':' expected after property name ${h()}`);e++}function d(r){if(r===void 0)throw new SyntaxError(`JSON value expected ${h()}`)}function l(r){if(r===void 0)throw new SyntaxError(`Array item expected ${h()}`)}function y(){if(e<n.length)throw new SyntaxError(`Expected end of input ${h()}`)}function A(r){if(!I(n.charCodeAt(e))){const f=n.slice(r,e);throw new SyntaxError(`Invalid number '${f}', expecting a digit ${h()}`)}}function N(){if(n.charCodeAt(e)!==D)throw new SyntaxError(`End of string '"' expected ${h()}`)}function q(){throw new SyntaxError(`Quoted object key expected ${h()}`)}function K(r,f){throw new SyntaxError(`Duplicate key '${r}' encountered at position ${f}`)}function Z(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${h()}`)}function M(){throw new SyntaxError(`Array item or end of array ']' expected ${h()}`)}function Q(r){throw new SyntaxError(`Invalid character '${r}' ${S()}`)}function W(r){const f=n.slice(r,r+2);throw new SyntaxError(`Invalid escape character '${f}' ${S()}`)}function H(){throw new SyntaxError(`Object value expected after ':' ${S()}`)}function z(r){const f=n.slice(r,r+6);throw new SyntaxError(`Invalid unicode character '${f}' ${S()}`)}function S(){return`at position ${e}`}function Y(){return e<n.length?`but got '${n[e]}'`:"but reached end of input"}function h(){return Y()+" "+S()}}function pn(n){return n===Cn||n===bn||n===Sn||n===$n}function O(n){return n>=j&&n<=B||n>=Dn&&n<=jn||n>=Ln&&n<=Bn}function I(n){return n>=j&&n<=B}function wn(n){return n>=On&&n<=B}function yn(n){return n>=32&&n<=1114111}function R(n,t){return n===t?!0:Array.isArray(n)&&Array.isArray(t)?n.length===t.length&&n.every((i,e)=>R(i,t[e])):k(n)&&k(t)?[...new Set([...Object.keys(n),...Object.keys(t)])].every(e=>R(n[e],t[e])):!1}function k(n){return typeof n=="object"&&n!==null}const gn={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},En=92,An=123,T=125,mn=91,J=93,Cn=32,bn=10,Sn=9,$n=13,D=34,Nn=43,V=45,j=48,On=49,B=57,In=44,xn=46,_n=58,Dn=65,Ln=97,Rn=69,Fn=101,jn=70,Bn=102;function Gn(n,t,i,e){const c=kn(i),w=typeof t=="function"?t.call({"":n},"",n):n;return E(w,"");function E(o,u){if(Array.isArray(e)){const a=e.find(s=>s.test(o));if(a){const s=a.stringify(o);if(typeof s!="string"||!X(s))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${s})`);return s}}if(typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o===null||o instanceof Date||o instanceof Boolean||o instanceof Number||o instanceof String)return JSON.stringify(o);if(o&&o.isLosslessNumber||typeof o=="bigint")return o.toString();if(Array.isArray(o))return C(o,u);if(o&&typeof o=="object")return b(o,u)}function C(o,u){if(o.length===0)return"[]";const a=c?u+c:void 0;let s=c?`[
`:"[";for(let d=0;d<o.length;d++){const l=typeof t=="function"?t.call(o,String(d),o[d]):o[d];c&&(s+=a),typeof l<"u"&&typeof l!="function"?s+=E(l,a):s+="null",d<o.length-1&&(s+=c?`,
`:",")}return s+=c?`
`+u+"]":"]",s}function b(o,u){if(typeof o.toJSON=="function")return Gn(o.toJSON(),t,i,void 0);const a=Array.isArray(t)?t.map(String):Object.keys(o);if(a.length===0)return"{}";const s=c?u+c:void 0;let d=!0,l=c?`{
`:"{";return a.forEach(y=>{const A=typeof t=="function"?t.call(o,y,o[y]):o[y];if(p(y,A)){d?d=!1:l+=c?`,
`:",";const N=JSON.stringify(y);l+=c?s+N+": ":N+":",l+=E(A,s)}}),l+=c?`
`+u+"}":"}",l}function p(o,u){return typeof u<"u"&&typeof u!="function"&&typeof u!="symbol"}}function kn(n){if(typeof n=="number")return" ".repeat(n);if(typeof n=="string"&&n!=="")return n}export{U as L,m as U,Xn as a,un as b,X as c,rn as d,an as e,Jn as f,P as g,x as i,Pn as p,Gn as s,Vn as t};
