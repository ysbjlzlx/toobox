(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1461],{31554:function(e,n,t){Promise.resolve().then(t.bind(t,1926))},1926:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r=t(58344),s=t(9268),i=t(89843),o=t(85276),u=t(50298),c=t(33607),l=t(81771),a=t(83210),d=t(13673),x=t(54835),f=function(e){var n=e.totps;return(0,s.jsx)(l.Z,{children:(0,s.jsx)(a.Z,{children:null==n?void 0:n.map(function(e){return(0,s.jsx)(d.ZP,{children:(0,s.jsx)(x.Z,{children:"ha"})},e.secretKey)})})})},h=t(77986),j=t(56429),Z=t(89608),p=t(1014),v=t(81645),m=t(39714),_=t(47931),b=t(19700),g=t(86006),y=t(17260),S=t(99718),C=t(14864),E=t(14240),I=t(36083),k=t(86902),w=t.n(k),K=function(e){var n=e.totp,t=(0,r._)((0,g.useState)(0),2),i=t[0],o=t[1],u=(0,r._)((0,g.useState)(""),2),c=u[0],a=u[1];(0,g.useEffect)(function(){if(o(0),n){var e=w()().second();o(w()().valueOf()+(e>=30?60-e:30-e)*1e3),a(n.generate())}},[n]);var d=(0,r._)((0,I.Z)({targetDate:i,onEnd:function(){if(o(0),n){var e=w()().second();o(w()().valueOf()+(e>=30?60-e:30-e)*1e3),a(n.generate())}}}),1)[0];return(0,s.jsx)(p.Z,{label:"Token",value:c,InputProps:{endAdornment:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,s.jsx)(C.Z,{variant:"determinate",value:(30-Math.round(d/1e3))/30*100}),(0,s.jsx)(l.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(E.Z,{variant:"caption",component:"div",color:"text.secondary",children:Math.round(d/1e3)})})]}),(0,s.jsx)(S.Z,{content:c})]})}})},F=function(e){var n=e.totp,t=(0,g.useRef)(null),r=(0,g.useMemo)(function(){return{width:128,height:128}},[]);return(0,g.useEffect)(function(){n&&y.toCanvas(t.current,n.toString(),r)},[r,n]),(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(l.Z,{sx:r,children:(0,s.jsx)("canvas",{ref:t})}),(0,s.jsx)(l.Z,{sx:{mt:2},children:(0,s.jsx)(K,{totp:n})}),(0,s.jsx)(l.Z,{sx:{mt:2},children:(0,s.jsx)(p.Z,{label:"URI",value:(null==n?void 0:n.toString())||"",InputProps:{endAdornment:(0,s.jsx)(S.Z,{content:null==n?void 0:n.toString()})},fullWidth:!0})})]})},P=function(){var e=(0,r._)((0,g.useState)(),2),n=e[0],t=e[1],i=(0,b.cI)({defaultValues:{secretKey:""}}),o=i.register,u=i.handleSubmit,a=i.setValue,d=i.control,x=function(){a("secretKey",new c.u3().base32,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:u(function(e){t(new c.GF({issuer:e.issuer,label:e.account,secret:e.secretKey}))}),children:[(0,s.jsx)(p.Z,(0,j._)((0,h._)({label:"Issuer"},o("issuer")),{fullWidth:!0,required:!0})),(0,s.jsx)(l.Z,{sx:{pt:2},children:(0,s.jsx)(p.Z,(0,j._)((0,h._)({label:"Account"},o("account")),{fullWidth:!0}))}),(0,s.jsx)(l.Z,{sx:{pt:2},children:(0,s.jsx)(b.Qr,{control:d,name:"secretKey",render:function(e){var n=e.field;return(0,s.jsx)(p.Z,(0,j._)((0,h._)({label:"Secret Key"},n),{InputProps:{endAdornment:(0,s.jsx)(v.Z,{position:"end",children:(0,s.jsx)(m.Z,{onClick:x,children:(0,s.jsx)(Z.Z,{})})})},fullWidth:!0,required:!0}))}})}),(0,s.jsxs)(l.Z,{sx:{pt:2,float:"right"},children:[(0,s.jsx)(_.Z,{children:"取消"}),(0,s.jsx)(_.Z,{type:"submit",children:"保存"})]})]}),(0,s.jsx)(F,{totp:n})]})},A=function(){var e=(0,r._)((0,u.Z)("totps",{defaultValue:[]}),2),n=e[0];return e[1],console.log(c.u3.fromUTF8("ha")),(0,s.jsx)(i.Z,{children:(0,s.jsxs)(o.Z,{container:!0,spacing:2,sx:{mt:2},children:[(0,s.jsx)(o.Z,{xs:4,children:(0,s.jsx)(f,{totps:n})}),(0,s.jsx)(o.Z,{xs:8,children:(0,s.jsx)(P,{})})]})})}},99718:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(58344),s=t(9268),i=t(41304),o=t(81645),u=t(39714),c=t(37013),l=t(78101),a=t.n(l),d=t(86006);function x(e){var n=e.content;e.onSuccess;var t=(0,d.useRef)(null),l=(0,r._)((0,d.useState)(!1),2),x=l[0],f=l[1];return(0,d.useEffect)(function(){if(t.current){var e=new(a())(t.current);e.on("success",function(e){f(!0)}),e.on("error",function(e){console.error(e)})}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{position:"end",children:(0,s.jsx)(u.Z,{ref:t,"data-clipboard-text":n,"aria-label":"Copy content",children:(0,s.jsx)(i.Z,{})})}),(0,s.jsx)(c.Z,{open:x,onClose:function(){return f(!1)},autoHideDuration:3e3,message:"复制成功"})]})}}},function(e){e.O(0,[5189,129,8071,8918,7057,2210,323,2667,6488,1744],function(){return e(e.s=31554)}),_N_E=e.O()}]);