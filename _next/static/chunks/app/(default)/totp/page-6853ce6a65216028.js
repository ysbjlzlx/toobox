(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1461],{70006:function(e,n,t){Promise.resolve().then(t.bind(t,2766))},2766:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return P}});var r=t(24670),s=t(57437),i=t(88938),o=t(85884),c=t(96271),u=t(30060),l=t(96507),a=t(35266),d=t(80356),x=t(87780),f=function(e){var n=e.totps;return(0,s.jsx)(l.Z,{children:(0,s.jsx)(a.Z,{children:null==n?void 0:n.map(function(e){return(0,s.jsx)(d.ZP,{children:(0,s.jsx)(x.Z,{children:"ha"})},e.secretKey)})})})},h=t(35029),j=t(88965),Z=t(46119),p=t(81679),v=t(52653),m=t(35551),b=t(61865),g=t(75),_=t(2265),y=t(75298),S=t(80221),C=t(6882),E=t(43226),I=t(26122),k=t(74548),w=t.n(k),K=function(e){var n=e.totp,t=(0,r._)((0,_.useState)(0),2),i=t[0],o=t[1],c=(0,r._)((0,_.useState)(""),2),u=c[0],a=c[1];(0,_.useEffect)(function(){if(o(0),n){var e=w()().second();o(w()().valueOf()+(e>=30?60-e:30-e)*1e3),a(n.generate())}},[n]);var d=(0,r._)((0,I.Z)({targetDate:i,onEnd:function(){if(o(0),n){var e=w()().second();o(w()().valueOf()+(e>=30?60-e:30-e)*1e3),a(n.generate())}}}),1)[0];return(0,s.jsx)(Z.Z,{label:"Token",value:u,InputProps:{endAdornment:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.Z,{sx:{position:"relative",display:"inline-flex"},children:[(0,s.jsx)(C.Z,{variant:"determinate",value:(30-Math.round(d/1e3))/30*100}),(0,s.jsx)(l.Z,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(E.Z,{variant:"caption",component:"div",color:"text.secondary",children:Math.round(d/1e3)})})]}),(0,s.jsx)(S.Z,{content:u})]})}})},F=function(e){var n=e.totp,t=(0,_.useRef)(null),r=(0,_.useMemo)(function(){return{width:128,height:128}},[]);return(0,_.useEffect)(function(){n&&y.toCanvas(t.current,n.toString(),r)},[r,n]),(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(l.Z,{sx:r,children:(0,s.jsx)("canvas",{ref:t})}),(0,s.jsx)(l.Z,{sx:{mt:2},children:(0,s.jsx)(K,{totp:n})}),(0,s.jsx)(l.Z,{sx:{mt:2},children:(0,s.jsx)(Z.Z,{label:"URI",value:(null==n?void 0:n.toString())||"",InputProps:{endAdornment:(0,s.jsx)(S.Z,{content:null==n?void 0:n.toString()})},fullWidth:!0})})]})},O=function(){var e=(0,r._)((0,_.useState)(),2),n=e[0],t=e[1],i=(0,b.cI)({defaultValues:{secretKey:""}}),o=i.register,c=i.handleSubmit,a=i.setValue,d=i.control,x=function(){a("secretKey",new u.u3().base32,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("form",{onSubmit:c(function(e){t(new u.GF({issuer:e.issuer,label:e.account,secret:e.secretKey}))}),children:[(0,s.jsx)(Z.Z,(0,j._)((0,h._)({label:"Issuer"},o("issuer")),{fullWidth:!0,required:!0})),(0,s.jsx)(l.Z,{sx:{pt:2},children:(0,s.jsx)(Z.Z,(0,j._)((0,h._)({label:"Account"},o("account")),{fullWidth:!0}))}),(0,s.jsx)(l.Z,{sx:{pt:2},children:(0,s.jsx)(b.Qr,{control:d,name:"secretKey",render:function(e){var n=e.field;return(0,s.jsx)(Z.Z,(0,j._)((0,h._)({label:"Secret Key"},n),{InputProps:{endAdornment:(0,s.jsx)(p.Z,{position:"end",children:(0,s.jsx)(v.Z,{onClick:x,children:(0,s.jsx)(g.Z,{icon:"material-symbols:refresh"})})})},fullWidth:!0,required:!0}))}})}),(0,s.jsxs)(l.Z,{sx:{pt:2,float:"right"},children:[(0,s.jsx)(m.Z,{children:"取消"}),(0,s.jsx)(m.Z,{type:"submit",children:"保存"})]})]}),(0,s.jsx)(F,{totp:n})]})},P=function(){var e=(0,r._)((0,c.Z)("totps",{defaultValue:[]}),2),n=e[0];return e[1],console.log(u.u3.fromUTF8("ha")),(0,s.jsx)(i.Z,{children:(0,s.jsxs)(o.Z,{container:!0,spacing:2,sx:{mt:2},children:[(0,s.jsx)(o.Z,{xs:4,children:(0,s.jsx)(f,{totps:n})}),(0,s.jsx)(o.Z,{xs:8,children:(0,s.jsx)(O,{})})]})})}},80221:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(24670),s=t(57437),i=t(75),o=t(81679),c=t(52653),u=t(57292),l=t(29954),a=t.n(l),d=t(2265);function x(e){var n=e.content;e.onSuccess;var t=(0,d.useRef)(null),l=(0,r._)((0,d.useState)(!1),2),x=l[0],f=l[1];return(0,d.useEffect)(function(){if(t.current){var e=new(a())(t.current);e.on("success",function(e){f(!0)}),e.on("error",function(e){console.error(e)})}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{position:"end",children:(0,s.jsx)(c.Z,{ref:t,"data-clipboard-text":n,"aria-label":"Copy content",children:(0,s.jsx)(i.Z,{icon:"material-symbols:content-copy-outline"})})}),(0,s.jsx)(u.Z,{open:x,onClose:function(){return f(!1)},autoHideDuration:3e3,message:"复制成功"})]})}},75:function(e,n,t){"use strict";var r=t(57437),s=t(39830);n.Z=function(e){var n=e.icon;return(0,r.jsx)("span",{role:"img",className:"anticon",children:(0,r.jsx)(s.JO,{icon:n})})}}},function(e){e.O(0,[7391,2169,9830,2066,8024,2596,9976,2971,596,1744],function(){return e(e.s=70006)}),_N_E=e.O()}]);